<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MR7 WORLD - OFFICIAL</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{
 font-family:Segoe UI, sans-serif;
 background:#fff;
 color:#333;
 text-align:center;
 padding:15px;
 overflow-x:hidden;
 transition:.4s;
}

/* BACKGROUND */
body::before{
 content:"";
 position:fixed;
 top:0;left:0;
 width:100%;height:100%;
 z-index:-2;
 background:linear-gradient(120deg,#0f0f0f,#003300,#000000,#001a00);
 background-size:400% 400%;
 animation:bgMove 10s infinite alternate;
 opacity:.25;
}
@keyframes bgMove{
 0%{background-position:0% 50%}
 50%{background-position:100% 50%}
 100%{background-position:0% 50%}
}

body.dark-mode{
 background:#111;
 color:#eee;
}

/* SCROLL BAR */
#scrollBar{
 position:fixed;
 top:0;left:0;
 height:5px;
 width:0%;
 background:lime;
 z-index:99999;
 box-shadow:0 0 15px lime;
}

/* LOADER */
#loader{
 position:fixed;
 top:0;left:0;
 width:100%;height:100%;
 background:#000;
 display:flex;
 justify-content:center;
 align-items:center;
 flex-direction:column;
 z-index:9999;
 color:white;
 font-size:22px;
}
.loader-circle{
 width:80px;height:80px;
 border:6px solid #444;
 border-top:6px solid lime;
 border-radius:50%;
 animation:spin 1s linear infinite;
 margin-bottom:15px;
}
#loadPercent{
 font-size:18px;
 margin-top:10px;
 color:lime;
 font-weight:bold;
}
@keyframes spin{
 0%{transform:rotate(0deg)}
 100%{transform:rotate(360deg)}
}

/* NOTIFICATION */
#notify{
 position:fixed;
 top:80px;
 right:15px;
 background:black;
 color:lime;
 padding:12px 18px;
 border-radius:15px;
 display:none;
 box-shadow:0 0 20px rgba(0,255,0,.6);
 z-index:99999;
 animation:pop .4s ease;
}
@keyframes pop{
 from{transform:scale(.9);opacity:.4}
 to{transform:scale(1);opacity:1}
}

/* DARK BUTTON */
.dark-toggle{
 position:fixed;
 top:15px;right:15px;
 background:green;
 color:white;
 border:none;
 padding:10px 18px;
 border-radius:30px;
 cursor:pointer;
 z-index:999;
 font-size:14px;
 transition:.3s;
}
.dark-toggle:hover{transform:scale(1.05);}

/* MENU */
.menu{
 position:fixed;
 top:15px;left:15px;
 font-size:30px;
 cursor:pointer;
 z-index:1000;
}
.menu-box{
 position:fixed;
 top:60px;left:15px;
 background:#222;
 padding:12px;
 border-radius:12px;
 display:none;
 box-shadow:0 0 20px rgba(0,255,0,.5);
 z-index:1000;
}
.menu-box button{
 width:200px;
 margin:6px 0;
 padding:10px;
 border:none;
 border-radius:10px;
 background:#333;
 color:white;
 cursor:pointer;
 transition:.3s;
 font-size:15px;
}
.menu-box button:hover{
 background:green;
 transform:scale(1.05);
}

/* SECTIONS */
.section{
 display:none;
 animation:fadeIn .5s ease;
 padding:20px 10px;
}
.section.active{display:block;}
@keyframes fadeIn{
 from{opacity:0;transform:translateY(15px)}
 to{opacity:1;transform:translateY(0)}
}

/* NEON BOX */
.neon-box{
 max-width:520px;
 margin:20px auto;
 border-radius:20px;
 overflow:hidden;
 position:relative;
}
.neon-box::before{
 content:"";
 position:absolute;
 top:-2px;left:-2px;
 width:calc(100% + 4px);
 height:calc(100% + 4px);
 background:linear-gradient(90deg,lime,green,lime,cyan,lime);
 background-size:400% 400%;
 animation:neonMove 4s infinite linear;
 z-index:-1;
}
@keyframes neonMove{
 0%{background-position:0% 50%}
 50%{background-position:100% 50%}
 100%{background-position:0% 50%}
}
.neon-inner{
 background:rgba(0,0,0,.6);
 padding:18px;
 border-radius:20px;
}

/* BUTTON */
.btn{
 background:green;
 color:white;
 padding:12px;
 width:100%;
 border:none;
 border-radius:12px;
 cursor:pointer;
 margin-top:10px;
 font-size:16px;
 transition:.3s;
}
.btn:hover{
 transform:scale(1.03);
 box-shadow:0 0 20px lime;
}

/* YOUTUBE BUTTON */
.yt-button{
 background:red;
 color:white;
 padding:14px 40px;
 border:none;
 border-radius:50px;
 cursor:pointer;
 font-size:18px;
 margin-top:15px;
 transition:.3s;
}
.yt-button:hover{transform:scale(1.08);}

/* PROFILE */
.profile-pic{
 width:170px;
 height:170px;
 border-radius:50%;
 border:5px solid lime;
 box-shadow:0 0 25px lime;
 margin-top:15px;
 transition:.3s;
}
.profile-pic:hover{transform:scale(1.07);}

/* TITLE */
#typingTitle{
 font-size:30px;
 font-weight:bold;
 color:lime;
 text-shadow:0 0 10px rgba(0,255,0,.6);
 margin-top:15px;
}

/* INPUTS */
input,textarea{
 width:95%;
 padding:12px;
 margin-top:8px;
 border-radius:10px;
 border:1px solid #aaa;
 outline:none;
 font-size:15px;
}
input:focus,textarea:focus{
 border:1px solid lime;
 box-shadow:0 0 10px rgba(0,255,0,.6);
}

/* CHAT */
#chat{
 text-align:left;
 max-height:280px;
 overflow-y:auto;
 background:#f5f5f5;
 border-radius:12px;
 padding:10px;
 margin-top:10px;
 border:1px solid #aaa;
}
body.dark-mode #chat{
 background:#222;
 border:1px solid #555;
}
.user{
 background:#e8f5e9;
 color:#00c853;
 padding:8px;
 border-radius:10px;
 margin:6px 0;
}
.bot{
 background:#e3f2fd;
 color:#2196f3;
 padding:8px;
 border-radius:10px;
 margin:6px 0;
}
body.dark-mode .user{
 background:#133a20;
 color:#00ff88;
}
body.dark-mode .bot{
 background:#0e2b44;
 color:#6bbcff;
}
#typingAI{
 display:none;
 color:gray;
 font-style:italic;
 margin-top:8px;
}

/* GAME CANVAS FIX */
canvas{
 background:black;
 border:3px solid lime;
 border-radius:12px;
 margin-top:15px;
 width:100%;
 max-width:400px;
 height:auto;
 display:block;
 margin-left:auto;
 margin-right:auto;
}

/* TIC TAC TOE */
#tttBoard{
 display:grid;
 grid-template-columns:repeat(3,1fr);
 gap:8px;
 max-width:320px;
 margin:15px auto;
}
.tttCell{
 background:#111;
 border:2px solid lime;
 border-radius:10px;
 height:90px;
 font-size:40px;
 color:lime;
 display:flex;
 justify-content:center;
 align-items:center;
 cursor:pointer;
 transition:.2s;
}
.tttCell:hover{transform:scale(1.05);}

/* GAME ZONE CARDS */
.cards{
 display:flex;
 flex-wrap:wrap;
 justify-content:center;
 gap:15px;
 margin-top:15px;
}
.card{
 width:160px;
 padding:15px;
 border-radius:15px;
 background:rgba(0,0,0,.5);
 border:1px solid lime;
 color:white;
 box-shadow:0 0 15px rgba(0,255,0,.3);
 cursor:pointer;
 transition:.3s;
}
.card:hover{
 transform:translateY(-6px) scale(1.05);
 box-shadow:0 0 25px lime;
}

/* MOBILE */
@media(max-width:600px){
 #typingTitle{font-size:26px;}
 .menu-box button{width:185px;}
 .card{width:140px;}
}
</style>
</head>

<body>

<div id="scrollBar"></div>

<div id="loader">
  <div class="loader-circle"></div>
  <div>Welcome to MR7 WORLD üî•</div>
  <div id="loadPercent">0%</div>
</div>

<div id="notify">üî• Ready!</div>

<div class="menu" onclick="toggleMenu()">‚ãÆ</div>
<div class="menu-box" id="menuBox">
 <button onclick="openPage('home')">üè† Home</button>
 <button onclick="openPage('login')">üîê Login</button>
 <button onclick="openPage('ai')">ü§ñ MR7 AI</button>
 <button onclick="openPage('calculator')">üßÆ Calculator</button>
 <button onclick="openPage('games')">üéÆ Game Zone</button>
 <button onclick="openPage('snake')">üêç Snake Game</button>
 <button onclick="openPage('tictactoe')">‚ùå‚≠ï Tic Tac Toe</button>
 <button onclick="openPage('race')">üèé Car Racing</button>
 <button onclick="openPage('contact')">üìû Contact</button>
</div>

<button class="dark-toggle" onclick="toggleDark()">üåô Dark</button>


<!-- HOME -->
<div id="home" class="section active">
<h1 id="typingTitle"></h1>
<h2>- MD -</h2>
<h3>- REHAN -</h3>

<a href="https://www.youtube.com/@MR7OFFICIAL777" target="_blank">
<button class="yt-button">SUBSCRIBE</button>
</a>

<p style="margin-top:10px;">üëÜüèª CLICK HERE ‚òùüèª</p>
<img src="rehan.png" class="profile-pic">

<div class="neon-box">
<div class="neon-inner">
<h2 style="color:lime;">üî• MR7 WORLD FEATURES</h2>
<p style="color:white;margin-top:10px;line-height:1.6;">
‚úÖ Smart Offline AI <br>
‚úÖ Login System <br>
‚úÖ Calculator Mode <br>
‚úÖ Game Zone (Snake + TicTacToe + Racing) <br>
‚úÖ Mobile Responsive Pro UI <br>
</p>
</div>
</div>

</div>


<!-- LOGIN -->
<div id="login" class="section">
<div class="neon-box">
<div class="neon-inner">
<h2 style="color:lime;">üîê MR7 Login System</h2>
<input id="loginUser" placeholder="Enter Username">
<input id="loginPass" type="password" placeholder="Enter Password">
<button class="btn" onclick="doLogin()">Login</button>
<button class="btn" onclick="doLogout()">Logout</button>
<p id="loginStatus" style="margin-top:10px;color:lime;font-weight:bold;"></p>
</div>
</div>
</div>


<!-- AI -->
<div id="ai" class="section">
<div class="neon-box">
<div class="neon-inner">
<h2 style="color:lime;">ü§ñ MR7 AI (Smart Offline)</h2>

<div id="chat"></div>
<div id="typingAI">AI typing...</div>

<input id="aiInput" placeholder="Ask anything...">
<button class="btn" onclick="askAI()">Send</button>
<button class="btn" onclick="clearChat()">Clear Chat</button>
<button class="btn" onclick="downloadChat()">Download Chat</button>

</div>
</div>
</div>


<!-- CALCULATOR -->
<div id="calculator" class="section">
<div class="neon-box">
<div class="neon-inner">
<h2 style="color:lime;">üßÆ MR7 Calculator Mode</h2>
<input id="calcInput" placeholder="Example: 25+10*2">
<button class="btn" onclick="calculate()">Calculate</button>
<h3 id="calcResult" style="margin-top:10px;color:lime;"></h3>
</div>
</div>
</div>


<!-- GAME ZONE -->
<div id="games" class="section">
<div class="neon-box">
<div class="neon-inner">
<h2 style="color:lime;">üéÆ MR7 GAME ZONE</h2>
<p style="color:white;margin-top:8px;">Choose a game and enjoy üòéüî•</p>

<div class="cards">
  <div class="card" onclick="openPage('snake')">üêç Snake</div>
  <div class="card" onclick="openPage('tictactoe')">‚ùå‚≠ï Tic Tac Toe</div>
  <div class="card" onclick="openPage('race')">üèé Car Racing</div>
</div>

</div>
</div>
</div>


<!-- SNAKE GAME -->
<div id="snake" class="section">
<div class="neon-box">
<div class="neon-inner">
<h2 style="color:lime;">üêç Snake Game (Fixed)</h2>
<canvas id="snakeCanvas" width="400" height="400"></canvas>
<button class="btn" onclick="startSnake()">‚ñ∂ Start</button>
<button class="btn" onclick="pauseSnake()">‚è∏ Pause</button>
<button class="btn" onclick="resetSnake()">üîÑ Reset</button>
<h3 id="snakeScore" style="margin-top:10px;color:lime;">Score: 0</h3>
<p style="color:white;margin-top:10px;font-size:14px;">
üì± Mobile: Touch buttons available below <br>
‚å® PC: Arrow keys
</p>

<div style="display:flex;gap:10px;justify-content:center;margin-top:12px;flex-wrap:wrap;">
  <button class="btn" style="width:45%;" onclick="snakeUp()">‚¨Ü Up</button>
  <button class="btn" style="width:45%;" onclick="snakeDown()">‚¨á Down</button>
  <button class="btn" style="width:45%;" onclick="snakeLeft()">‚¨Ö Left</button>
  <button class="btn" style="width:45%;" onclick="snakeRight()">‚û° Right</button>
</div>

</div>
</div>
</div>


<!-- TIC TAC TOE -->
<div id="tictactoe" class="section">
<div class="neon-box">
<div class="neon-inner">
<h2 style="color:lime;">‚ùå‚≠ï Tic Tac Toe</h2>
<div id="tttBoard"></div>
<h3 id="tttStatus" style="margin-top:10px;color:lime;">Player X Turn</h3>
<button class="btn" onclick="resetTTT()">üîÑ Reset</button>
</div>
</div>
</div>


<!-- CAR RACING -->
<div id="race" class="section">
<div class="neon-box">
<div class="neon-inner">
<h2 style="color:lime;">üèé Car Racing Mini</h2>
<canvas id="raceCanvas" width="400" height="500"></canvas>
<button class="btn" onclick="startRace()">‚ñ∂ Start Race</button>
<button class="btn" onclick="resetRace()">üîÑ Reset</button>
<h3 id="raceScore" style="margin-top:10px;color:lime;">Score: 0</h3>

<p style="color:white;font-size:14px;margin-top:8px;">
‚å® PC: Left / Right Arrow <br>
üì± Mobile: Tap buttons below
</p>

<div style="display:flex;gap:10px;justify-content:center;margin-top:12px;">
  <button class="btn" style="width:45%;" onclick="moveLeft()">‚¨Ö Left</button>
  <button class="btn" style="width:45%;" onclick="moveRight()">Right ‚û°</button>
</div>

</div>
</div>
</div>


<!-- CONTACT -->
<div id="contact" class="section">
<div class="neon-box">
<div class="neon-inner">
<h2 style="color:lime;">üìû Contact Me</h2>
<input id="name" placeholder="Name">
<input id="mobile" placeholder="Mobile">
<textarea id="message" placeholder="Message"></textarea>
<button class="btn" onclick="sendMail()">Send Email</button>
</div>
</div>
</div>


<script>
// =====================
// DARK MODE PERMANENT
// =====================
if(localStorage.darkMode==="on"){
 document.body.classList.add("dark-mode");
}else{
 document.body.classList.add("dark-mode");
 localStorage.darkMode="on";
}
function toggleDark(){
 document.body.classList.toggle("dark-mode");
 localStorage.darkMode = document.body.classList.contains("dark-mode") ? "on" : "off";
}

// =====================
// LOADER
// =====================
let percent=0;
let loadInt=setInterval(()=>{
 percent++;
 loadPercent.innerText=percent+"%";
 if(percent>=100) clearInterval(loadInt);
},12);

window.onload=function(){
 setTimeout(()=>{
   loader.style.display="none";
   showNotification("üî• MR7 WORLD Ready!");
   startTypingTitle();
 },1500);
};

// =====================
// NOTIFY
// =====================
function showNotification(text){
 notify.innerText=text;
 notify.style.display="block";
 setTimeout(()=>{notify.style.display="none";},2500);
}

// =====================
// TITLE
// =====================
function startTypingTitle(){
 let text="- MR7 WORLD -";
 let i=0;
 typingTitle.innerHTML="";
 let t=setInterval(()=>{
   typingTitle.innerHTML+=text.charAt(i);
   i++;
   if(i>=text.length) clearInterval(t);
 },120);
}

// =====================
// SCROLL BAR
// =====================
window.onscroll=function(){
 let winScroll=document.documentElement.scrollTop || document.body.scrollTop;
 let height=document.documentElement.scrollHeight-document.documentElement.clientHeight;
 let scrolled=(winScroll/height)*100;
 scrollBar.style.width=scrolled+"%";
}

// =====================
// MENU
// =====================
function toggleMenu(){
 menuBox.style.display = menuBox.style.display=="block"?"none":"block";
}

// =====================
// OPEN PAGE
// =====================
function openPage(id){
 document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
 document.getElementById(id).classList.add("active");
 menuBox.style.display="none";

 // redraw games when open
 if(id==="snake") drawSnake();
 if(id==="race") drawRace();
}

// =====================
// LOGIN SYSTEM
// =====================
function doLogin(){
 let u=loginUser.value.trim();
 let p=loginPass.value.trim();

 if(!u || !p){
   loginStatus.innerText="‚ö† Enter username and password!";
   return;
 }

 localStorage.mr7User=u;
 localStorage.mr7Pass=p;
 localStorage.loggedIn="yes";

 loginStatus.innerText="‚úÖ Login Successful! Welcome " + u;
 showNotification("üî• Welcome " + u);
}

function doLogout(){
 localStorage.loggedIn="no";
 loginStatus.innerText="‚ùå Logged Out!";
 showNotification("Logout Successful!");
}

if(localStorage.loggedIn==="yes"){
 loginStatus.innerText="‚úÖ Logged in as: " + localStorage.mr7User;
}

// =====================
// AI SYSTEM (SMART OFFLINE)
// =====================
let chat=document.getElementById("chat");
chat.innerHTML = localStorage.chatHistory || "";

let aiMemory = JSON.parse(localStorage.aiMemory || "{}");

function saveAIMemory(){
 localStorage.aiMemory = JSON.stringify(aiMemory);
}

function addMsg(text,cls){
 let div=document.createElement("div");
 div.className=cls;
 chat.appendChild(div);

 let i=0;
 let speed=10;
 let interval=setInterval(()=>{
   div.innerText = text.substring(0,i);
   i++;
   chat.scrollTop=chat.scrollHeight;
   if(i>text.length){
     clearInterval(interval);
     localStorage.chatHistory = chat.innerHTML;
   }
 },speed);
}

function getAIReply(q){
 let original=q;
 q=q.toLowerCase();

 // remember name
 if(q.includes("my name is") || q.includes("mera naam")){
   let words = original.split(" ");
   let name = words[words.length-1];
   aiMemory.userName=name;
   saveAIMemory();
   return "üî• Nice! Ab main yaad rakhunga tumhara naam: " + name + " üòé";
 }

 let boss = aiMemory.userName ? aiMemory.userName : "Boss";

 // mood system
 if(q.includes("sad") || q.includes("depressed") || q.includes("tension")){
   aiMemory.mood="sad";
   saveAIMemory();
   return "üíö " + boss + " tension mat lo! Tu legend banega üî• Main tumhare sath hoon!";
 }

 if(q.includes("happy") || q.includes("khush")){
   aiMemory.mood="happy";
   saveAIMemory();
   return "üòÑ Wah " + boss + "! Aaj mood full fire hai üî•üî•";
 }

 if(q.includes("hello")||q.includes("hi")||q.includes("namaste")){
   return "Hello " + boss + " üòÑüî• MR7 WORLD me welcome!";
 }

 if(q.includes("how are you") || q.includes("kaise ho")){
   return "Main mast hoon " + boss + " üòéüî• Tum batao!";
 }

 if(q.includes("owner")||q.includes("malik")){
   return "Mera owner MD REHAN hai üòéüî• MR7 WORLD ka king!";
 }

 if(q.includes("time")){
   return "‚è∞ Time: " + new Date().toLocaleTimeString();
 }

 if(q.includes("date") || q.includes("day")){
   return "üìÖ Date: " + new Date().toLocaleDateString();
 }

 if(q.includes("game")){
   return "üéÆ MR7 GAME ZONE ready hai! Snake, TicTacToe aur Racing available hai üî•";
 }

 if(q.includes("joke")){
   let jokes=[
     "üòÇ Teacher: Homework kiya? Student: Sir laptop hang ho gaya üò≠",
     "ü§£ Coding me bug fix karna life fix karne se easy hai!",
     "üòÇ Boss, tumhari website hacker level lag rahi hai üòé"
   ];
   return jokes[Math.floor(Math.random()*jokes.length)];
 }

 if(q.includes("motivate") || q.includes("motivation")){
   let mot=[
     "üî• " + boss + " ek din top pe hoga! Bas rukna nahi üí™",
     "‚ö° Fail hona normal hai, give up karna galat hai!",
     "üèÜ Jo mehnat karta hai wahi legend banta hai üòé"
   ];
   return mot[Math.floor(Math.random()*mot.length)];
 }

 // calculator auto
 if(q.match(/^[0-9+\-*/().\s]+$/)){
   try{
     return "üßÆ Answer: " + eval(q);
   }catch{
     return "üòÖ Boss ye calculation galat lag raha hai.";
   }
 }

 // smart fallback
 return "ü§ñ " + boss + " mujhe tumhara question samajh aa gaya üòéüî•\nTum thoda clear bologe to main best answer dunga!";
}

function askAI(){
 let q=aiInput.value.trim();
 if(!q) return;

 typingAI.style.display="block";
 addMsg("You: "+q,"user");
 aiInput.value="";

 setTimeout(()=>{
   typingAI.style.display="none";
   let reply=getAIReply(q);
   addMsg("AI: "+reply,"bot");
 },700);
}

function clearChat(){
 if(confirm("Clear full chat?")){
   chat.innerHTML="";
   localStorage.removeItem("chatHistory");
 }
}

function downloadChat(){
 let text=chat.innerText;
 let blob=new Blob([text],{type:"text/plain"});
 let a=document.createElement("a");
 a.href=URL.createObjectURL(blob);
 a.download="MR7_AI_CHAT.txt";
 a.click();
}

// =====================
// CALCULATOR MODE
// =====================
function calculate(){
 let exp = calcInput.value.trim();
 if(!exp){
   calcResult.innerText="‚ö† Enter calculation!";
   return;
 }
 try{
   calcResult.innerText="‚úÖ Result: " + eval(exp);
 }catch{
   calcResult.innerText="‚ùå Invalid Expression!";
 }
}

// =====================
// SNAKE GAME FIXED + MOBILE BUTTONS
// =====================
const snakeCanvas=document.getElementById("snakeCanvas");
const sctx=snakeCanvas.getContext("2d");

let snake,food,dir,snakeLoop,snakeScore=0,snakeRunning=false;

function initSnake(){
 snake=[{x:200,y:200}];
 dir={x:20,y:0};
 food=randomFood();
 snakeScore=0;
 updateSnakeScore();
 drawSnake();
}

function randomFood(){
 return {
   x:Math.floor(Math.random()*20)*20,
   y:Math.floor(Math.random()*20)*20
 };
}

function updateSnakeScore(){
 document.getElementById("snakeScore").innerText="Score: "+snakeScore;
}

function drawSnake(){
 sctx.clearRect(0,0,snakeCanvas.width,snakeCanvas.height);

 sctx.fillStyle="black";
 sctx.fillRect(0,0,snakeCanvas.width,snakeCanvas.height);

 sctx.fillStyle="red";
 sctx.fillRect(food.x,food.y,20,20);

 sctx.fillStyle="lime";
 snake.forEach(p=>{
   sctx.fillRect(p.x,p.y,20,20);
 });
}

function updateSnake(){
 let head={x:snake[0].x+dir.x,y:snake[0].y+dir.y};

 if(head.x<0||head.y<0||head.x>=400||head.y>=400){
   snakeGameOver();
   return;
 }

 for(let i=1;i<snake.length;i++){
   if(head.x===snake[i].x && head.y===snake[i].y){
     snakeGameOver();
     return;
   }
 }

 snake.unshift(head);

 if(head.x===food.x && head.y===food.y){
   snakeScore++;
   updateSnakeScore();
   food=randomFood();
 }else{
   snake.pop();
 }

 drawSnake();
}

function snakeGameOver(){
 clearInterval(snakeLoop);
 snakeRunning=false;
 alert("Game Over üòÖ Score: "+snakeScore);
}

function startSnake(){
 if(snakeRunning) return;
 snakeRunning=true;
 snakeLoop=setInterval(updateSnake,120);
}

function pauseSnake(){
 clearInterval(snakeLoop);
 snakeRunning=false;
}

function resetSnake(){
 clearInterval(snakeLoop);
 snakeRunning=false;
 initSnake();
}

function snakeUp(){ if(dir.y===0) dir={x:0,y:-20}; }
function snakeDown(){ if(dir.y===0) dir={x:0,y:20}; }
function snakeLeft(){ if(dir.x===0) dir={x:-20,y:0}; }
function snakeRight(){ if(dir.x===0) dir={x:20,y:0}; }

document.addEventListener("keydown",(e)=>{
 if(e.key==="ArrowUp") snakeUp();
 if(e.key==="ArrowDown") snakeDown();
 if(e.key==="ArrowLeft") snakeLeft();
 if(e.key==="ArrowRight") snakeRight();
});

initSnake();

// =====================
// TIC TAC TOE
// =====================
let board=["","","","","","","","",""];
let currentPlayer="X";
let gameOverTTT=false;

function createBoard(){
 tttBoard.innerHTML="";
 board.forEach((val,i)=>{
   let cell=document.createElement("div");
   cell.className="tttCell";
   cell.innerText=val;
   cell.onclick=()=>makeMove(i);
   tttBoard.appendChild(cell);
 });
}

function makeMove(i){
 if(board[i]!=="" || gameOverTTT) return;

 board[i]=currentPlayer;
 createBoard();

 if(checkWinner()){
   tttStatus.innerText="üèÜ Player "+currentPlayer+" Wins!";
   gameOverTTT=true;
   return;
 }

 if(board.every(x=>x!=="")){
   tttStatus.innerText="ü§ù Draw Match!";
   gameOverTTT=true;
   return;
 }

 currentPlayer = currentPlayer==="X"?"O":"X";
 tttStatus.innerText="Player "+currentPlayer+" Turn";
}

function checkWinner(){
 let wins=[
   [0,1,2],[3,4,5],[6,7,8],
   [0,3,6],[1,4,7],[2,5,8],
   [0,4,8],[2,4,6]
 ];
 return wins.some(w=>{
   return board[w[0]] && board[w[0]]===board[w[1]] && board[w[1]]===board[w[2]];
 });
}

function resetTTT(){
 board=["","","","","","","","",""];
 currentPlayer="X";
 gameOverTTT=false;
 tttStatus.innerText="Player X Turn";
 createBoard();
}
createBoard();

// =====================
// CAR RACING GAME FIXED
// =====================
const raceCanvas=document.getElementById("raceCanvas");
const rctx=raceCanvas.getContext("2d");

let car={x:180,y:420,w:40,h:60};
let obstacles=[];
let raceScore=0;
let raceLoop;
let raceRunning=false;

function drawRace(){
 rctx.clearRect(0,0,raceCanvas.width,raceCanvas.height);

 rctx.fillStyle="#222";
 rctx.fillRect(0,0,raceCanvas.width,raceCanvas.height);

 // road line
 rctx.fillStyle="white";
 for(let i=0;i<raceCanvas.height;i+=40){
   rctx.fillRect(195,i,10,20);
 }

 // car
 rctx.fillStyle="lime";
 rctx.fillRect(car.x,car.y,car.w,car.h);

 // obstacles
 rctx.fillStyle="red";
 obstacles.forEach(o=>{
   rctx.fillRect(o.x,o.y,o.w,o.h);
 });
}

function spawnObstacle(){
 let x=Math.floor(Math.random()*7)*55;
 obstacles.push({x:x,y:-60,w:50,h:60});
}

function updateRace(){
 if(Math.random()<0.05) spawnObstacle();

 obstacles.forEach(o=>o.y+=6);

 obstacles.forEach(o=>{
   if(car.x < o.x+o.w && car.x+car.w > o.x && car.y < o.y+o.h && car.y+car.h > o.y){
     endRace();
   }
 });

 obstacles = obstacles.filter(o=>o.y<520);

 raceScore++;
 document.getElementById("raceScore").innerText="Score: "+raceScore;

 drawRace();
}

function startRace(){
 if(raceRunning) return;
 raceRunning=true;
 raceLoop=setInterval(updateRace,50);
}

function resetRace(){
 clearInterval(raceLoop);
 raceRunning=false;
 obstacles=[];
 raceScore=0;
 car.x=180;
 document.getElementById("raceScore").innerText="Score: 0";
 drawRace();
}

function endRace(){
 clearInterval(raceLoop);
 raceRunning=false;
 alert("Crash üòÖ Score: "+raceScore);
}

function moveLeft(){
 car.x-=20;
 if(car.x<0) car.x=0;
}
function moveRight(){
 car.x+=20;
 if(car.x>360) car.x=360;
}

document.addEventListener("keydown",(e)=>{
 if(e.key==="ArrowLeft") moveLeft();
 if(e.key==="ArrowRight") moveRight();
});

drawRace();

// =====================
// CONTACT EMAIL
// =====================
function sendMail(){
 let n=document.getElementById("name").value.trim();
 let m=document.getElementById("mobile").value.trim();
 let msg=document.getElementById("message").value.trim();

 if(!n || !msg){
   alert("Enter Name and Message üòÖ");
   return;
 }

 let subject=encodeURIComponent("MR7 Contact from "+n);
 let body=encodeURIComponent("Name: "+n+"\nMobile: "+m+"\n\nMessage:\n"+msg);

 location.href="mailto:mrrehanofficial.1777@gmail.com?subject="+subject+"&body="+body;
}
</script>

</body>
</html>
